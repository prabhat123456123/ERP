<%- include('../../partials/top-bar') %>


      <!-- Site wrapper -->
      <div class="wrapper">
         <%- include('../../partials/header') %>
		
         <!-- =============================================== -->
         <!-- Left side column. contains the sidebar -->
       <%- include('../../partials/sidebar') %>
	
   
         <!-- =============================================== -->
         <!-- Content Wrapper. Contains page content -->
         <div class="content-wrapper">
			   
            <!-- Content Header (Page header) -->
            <section class="content-header">
               <div class="header-icon">
                  <i class="fa fa-dashboard"></i>
               </div>
               <div class="header-title">
                  <h1>SMART SCHOOL Dashboard</h1>
                  <small>Very detailed & featured admin.</small>
               </div>
            </section>
			
            <!-- Main content -->
            <section class="content">
          
			<div class="panel panel-bd lobidrag">
                        <div class="panel-heading">
                           <div class="btn-group" id="buttonexport">
                              <a href="#">
                                 <h4>Payment Module for student</h4>
                              </a>
                           </div>
                        </div>
                        <div class="panel-body">
                            <%- include('../../partials/message') %>
                           
				<div class="row">
               <div class="col-md-4"><h4>Annual Fee : Rs <% if(data.length){ %> <%= data[0].total_amount %> <% }else{ %> N/A <% } %></h4></div>
               <div class="col-md-4"><h4>Paid Fee : Rs 2000</h4></div>
               <div class="col-md-4"><h4>Remaining Fee : Rs 3000 </h4></div>

            </div>

      
		<br>

					<div class="table-responsive">
						
						<table id="sample_data" class="table table-bordered table-striped">
						
							<thead>
								<tr>
								
									<th> Amount</th>
									<th> Transaction Date</th>
									<th> Transaction Mode</th>
									<th> Transaction Status</th>
									
								</tr>
							</thead>
                     <tbody>
                        <% if(data.length>0){ %> 
                           <% for(let i=0; i<data.length; i++){%> 
                           <tr>
                              <td><%= data[i].total_amount %></td>
                              <td><%= data[i].transaction_date %></td>
                              <td><%= data[i].transaction_mode %></td>
                              <td><%= data[i].transaction_status %></td>

                           </tr>
                           <% } %>
                           <% }else{ %>
                           <tr>No Data Found.</tr>
                            <% } %>
                     </tbody>
						</table>
					</div>
                <button type="button" class="btn btn-primary" onclick="PaymentModel(2)">Click for Payment</button>
				</div>
			</div>
		
            </section>
		
   <div class="modal fade" id="editStudentModal" tabindex="-1" role="dialog">
                  <div class="modal-dialog modal-lg"  role="document">
                     <div class="modal-content">
                        <div class="modal-header modal-header-primary">
                           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                           <h3><i class="fa fa-plus m-r-5"></i> Payment Details</h3>
                        </div>
                        <div class="modal-body">
                         
                              <div id="editStudentDiv">
                               
                             
                           </div>
                        </div>
                        <div class="modal-footer">
                           <button type="button" class="btn btn-danger pull-left" data-dismiss="modal">Close</button>
                        </div>
                     </div>
                     <!-- /.modal-content -->
                  </div>
                  <!-- /.modal-dialog -->
               </div>
            <!-- /.content -->
         </div>
         <!-- /.content-wrapper -->
        <%- include('../../partials/footer') %>
      </div>

                 
      <!-- /.wrapper -->
      <!-- Start Core Plugins
         
         =====================================================================-->
   <%- include('../../partials/footer-script') %>

   <script nonce="<%= nonce %>" type="text/javascript" language="javascript">


     
       
// function viewAdmission(studentId) {
//     try {
     
//       $("#viewStudentDiv").html("");
//       $("#viewStudentModal").modal("toggle");
//       $.ajax({
//          url: `/admission/view-student-byid`,
//          type: "post",
//          data:{studentId:studentId},
//          dataType: "json",
//          cache: false,
//          success: function (data) {
//     console.log(data);
//             let formDetails = ``;
//             formDetails += `<table class="table table-bordered table-striped"> 
               
//                <tr><td>Photo</td><td><img src="/uploads/student/${data[0].email}/${data[0].photo}" width="100px"></td></tr>
//                <tr><td>Name</td><td>${data[0].name}</td></tr>
//                <tr><td>Email</td><td>${data[0].email}</td></tr>
//                <tr><td>Gender</td><td>${data[0].gender}</td></tr>
//                 <tr><td>Father Name</td><td>${data[0].fathers_name}</td></tr>
//                <tr><td>Mother Name</td><td>${data[0].mothers_name}</td></tr>
//                <tr><td>Parent Phone</td><td>${data[0].parent_phone}</td></tr>
//                <tr><td>Class</td><td>${data[0].class_name}</td></tr>
//                <tr><td>School</td><td>${data[0].school_name}</td></tr>
//                <tr><td>address</td><td>${data[0].address}</td></tr>
//                <tr><td>DOB</td><td>${data[0].dob}</td></tr>
              
//                </table>`;
//             $("#viewStudentDiv").html(formDetails);
          
//         },
//       });
//     } catch (err) {
//       console.error(err);
//     }
//   }


                  function PaymentModel(studentId) {
    try {
     
      $("#editStudentDiv").html("");
      $("#editStudentModal").modal("toggle");
      $.ajax({
         url: `/admission/fetch-student-byid`,
         type: "post",
         data:{studentId:studentId},
         dataType: "json",
         cache: false,
         success: function (data) {
        console.log(data);
      
            let formDetails = ``;
            formDetails += `<form action="/admission/update-admission-by-id" method="post" enctype="multipart/form-data">
                             
                                  <input type="hidden"  value="${studentId}" class="form-control" name="student_id">
                            <div class="row">
                                <div class="form-group col-lg-6">
                                    <label>Amount</label>
                                    <input placeholder="Enter Amount." type="text" class="form-control" name="amount">
                                </div>
                            </div>
                            <div align="center">
                               <input type="submit" class="btn btn-success"
															value="Pay Now">
															
														
                            </div>
                        </form>`;
            $("#editStudentDiv").html(formDetails);
          
        },
      });
    } catch (err) {
      console.error(err);
    }
  }
  

    
$(document).ready(function(){
	

	toastr.options = {
				'closeButton': true,
				'debug': false,
				'newestOnTop': false,
				'progressBar': true,
				'positionClass': 'toast-top-center',
				'preventDuplicates': false,
				'showDuration': '1000',
				'hideDuration': '1000',
				'timeOut': '5000',
				'extendedTimeOut': '1000',
				'showEasing': 'swing',
				'hideEasing': 'linear',
				'showMethod': 'fadeIn',
				'hideMethod': 'fadeOut',
			}

 
	
// var dataTable = $('#sample_data').DataTable({
// 		"processing": true,
// 		"serverSide": true,
// 		 dom: 'Bfrtip',
//    buttons: [
//       {
//          extend: 'csv',
        
//          exportOptions: {
//             columns: 'th:not(:last-child)'
//          }
//       },
//        {
//          extend: 'pdf',
        
//          exportOptions: {
//             columns: 'th:not(:last-child)'
//          }
//       }
//    ],
// 		"order":[],
// 		"ajax":{
// 			url:"/financial/get-student-financial",
// 			type:"POST",
// 		},
//          columns: [
//         { data: "check" },
//         { data: "name" },
//         { data: "fathername" },
//         { data: "email" },
//         { data: "action" },
// 	],
		
// 	});

	
  
	
});	
setTimeout(function () {
    $("#error").hide();
  }, 3000);
  setTimeout(function () {
    $("#error_msg").hide();
  }, 3000);
  setTimeout(function () {
    $("#success_msg").hide();
  }, 3000);
</script>